<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>South Valley - Command Center</title>

    <!-- Google Fonts South Valley Premium -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Outfit:wght@700;800;900&family=Space+Grotesk:wght@500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Styles fusionn√©s South Valley (base + premium) -->
    <style>
      :root {
        --bg-deep: #000000;
        --bg-card: #0a0a0a;
        --bg-elevated: #111111;
        --accent: #10b981;
        --accent-glow: rgba(16, 185, 129, 0.25);
        --accent-dim: rgba(16, 185, 129, 0.1);
        --text-main: #ffffff;
        --text-secondary: #9ca3af;
        --border: #1a1a1a;
        --border-accent: #2a2a2a;
      }

      * {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      body {
        background: var(--bg-deep);
        color: var(--text-main);
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont,
          "Segoe UI", sans-serif;
        overflow-x: hidden;
        -webkit-tap-highlight-color: transparent;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        position: relative;
      }

      body::before {
        content: "";
        position: fixed;
        inset: 0;
        background-image: url("https://res.cloudinary.com/dlmmylat6/image/upload/v1770004112/0453086a-aa8b-480c-9227-6ceb099b3530_z111qu.png");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        opacity: 0.03;
        filter: blur(2px);
        z-index: -1;
        pointer-events: none;
      }

      .brand-font {
        font-family: "Outfit", system-ui, -apple-system, BlinkMacSystemFont,
          "Segoe UI", sans-serif;
        letter-spacing: -0.05em;
        font-weight: 900;
      }

      .accent-font {
        font-family: "Space Grotesk", system-ui, -apple-system,
          BlinkMacSystemFont, "Segoe UI", sans-serif;
      }

      .hidden {
        display: none !important;
      }

      .app-shell {
        max-width: 640px;
        margin: 0 auto;
        padding: 16px 16px 96px;
        position: relative;
        z-index: 1;
      }

      /* ========== SPLASH SCREEN ========== */
      #splash-screen {
        position: fixed;
        inset: 0;
        z-index: 9999;
        background: linear-gradient(135deg, #000 0%, #0a0a0a 100%);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .splash-logo {
        width: 160px;
        height: 160px;
        margin-bottom: 2rem;
        animation: logoFloat 3s ease-in-out infinite;
        filter: drop-shadow(0 10px 40px rgba(16, 185, 129, 0.4));
        object-fit: contain;
      }

      .splash-title {
        font-size: 2.5rem;
        background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: textGlow 2s ease-in-out infinite;
      }

      @keyframes logoFloat {
        0%,
        100% {
          transform: translateY(0px) scale(1);
        }
        50% {
          transform: translateY(-10px) scale(1.02);
        }
      }

      @keyframes textGlow {
        0%,
        100% {
          filter: drop-shadow(0 0 20px rgba(16, 185, 129, 0.5));
        }
        50% {
          filter: drop-shadow(0 0 30px rgba(16, 185, 129, 0.8));
        }
      }

      /* ========== HEADER PREMIUM ========== */
      .header-glass {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        padding: 12px 18px;
        border-radius: 20px;
        background: linear-gradient(
            120deg,
            rgba(148, 163, 184, 0.18),
            rgba(15, 23, 42, 0.8)
          ),
          rgba(0, 0, 0, 0.85);
        backdrop-filter: blur(20px) saturate(180%);
        -webkit-backdrop-filter: blur(20px) saturate(180%);
        border: 1px solid rgba(148, 163, 184, 0.35);
        box-shadow: 0 18px 45px rgba(0, 0, 0, 0.9);
      }

      .header-logo {
        width: 45px;
        height: 45px;
        filter: drop-shadow(0 4px 12px rgba(16, 185, 129, 0.3));
        border-radius: 999px;
        object-fit: cover;
      }

      .header-title-block {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .header-title {
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 0.16em;
        color: #9ca3af;
      }

      .header-subtitle {
        font-size: 1.2rem;
      }

      .header-badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 14px;
        border-radius: 999px;
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        color: #fefce8;
        background-image: linear-gradient(
          120deg,
          #facc15,
          #f59e0b,
          #eab308
        );
        box-shadow: 0 0 24px rgba(245, 158, 11, 0.6);
        position: relative;
        overflow: hidden;
        white-space: nowrap;
      }

      .header-badge::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          120deg,
          transparent 0%,
          rgba(255, 255, 255, 0.35) 35%,
          transparent 75%
        );
        opacity: 0;
        transform: translateX(-40%);
        transition: transform 300ms ease-out, opacity 300ms ease-out;
      }

      .header-badge:hover::before {
        opacity: 1;
        transform: translateX(40%);
      }

      /* ========== MARQUEE PREMIUM ========== */
      .marquee-container {
        margin-top: 16px;
        position: relative;
        overflow: hidden;
        border-radius: 20px;
        border: 1px solid rgba(148, 163, 184, 0.35);
        background: radial-gradient(
            circle at 0 0,
            rgba(56, 189, 248, 0.15),
            transparent 55%
          ),
          radial-gradient(
            circle at 100% 100%,
            rgba(16, 185, 129, 0.2),
            transparent 60%
          ),
          rgba(15, 23, 42, 0.9);
        backdrop-filter: blur(18px);
        -webkit-backdrop-filter: blur(18px);
        box-shadow: 0 18px 45px rgba(0, 0, 0, 0.9);
      }

      .marquee-track {
        display: flex;
        align-items: center;
        gap: 40px;
        width: max-content;
        animation: marquee 22s linear infinite;
        will-change: transform;
        padding: 10px 24px;
      }

      .marquee-item {
        flex-shrink: 0;
        padding: 0 0;
        font-size: 10px;
        font-weight: 900;
        color: #000;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        background: #a7f3d0;
        color: #022c22;
        padding: 4px 10px;
        border-radius: 999px;
        box-shadow: 0 0 16px rgba(16, 185, 129, 0.6);
      }

      @keyframes marquee {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(-50%);
        }
      }

      /* ========== STATUS BAR ========== */
      .status-bar {
        margin-top: 16px;
        background: linear-gradient(
          135deg,
          var(--bg-elevated) 0%,
          var(--bg-card) 100%
        );
        border: 1px solid var(--border-accent);
        border-radius: 18px;
        padding: 10px 14px;
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        font-size: 11px;
      }

      .status-bar::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(16, 185, 129, 0.1),
          transparent
        );
        animation: shimmer 3s infinite;
      }

      @keyframes shimmer {
        to {
          left: 100%;
        }
      }

      .status-left {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .status-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        position: relative;
      }

      .status-dot.online {
        background: var(--accent);
        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2),
          0 0 10px var(--accent);
        animation: pulse-dot 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }

      .status-dot.offline {
        background: #ef4444;
        box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.2);
      }

      @keyframes pulse-dot {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.7;
        }
      }

      .status-label {
        font-size: 0.7rem;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        color: var(--text-secondary);
      }

      .status-hours {
        font-size: 0.7rem;
        color: var(--text-secondary);
      }

      /* ========== FILTERS PREMIUM ========== */
      .filters-row {
        margin-top: 18px;
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .filter-chip {
        position: relative;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        padding: 7px 14px;
        border-radius: 999px;
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        border: 1px solid rgba(148, 163, 184, 0.45);
        color: var(--text-secondary);
        background: radial-gradient(
            circle at 0 0,
            rgba(56, 189, 248, 0.18),
            transparent 60%
          ),
          rgba(15, 23, 42, 0.85);
        cursor: pointer;
        transition: background 140ms ease-out, border-color 140ms ease-out,
          color 140ms ease-out, box-shadow 140ms ease-out,
          transform 120ms ease-out;
        font-weight: 800;
      }

      .filter-chip span {
        position: relative;
        z-index: 1;
      }

      .filter-chip::before {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: inherit;
        background: linear-gradient(
          120deg,
          rgba(56, 189, 248, 0),
          rgba(56, 189, 248, 0.18),
          rgba(16, 185, 129, 0)
        );
        opacity: 0;
        transition: opacity 140ms ease-out;
      }

      .filter-chip:hover {
        border-color: rgba(148, 163, 184, 0.9);
        color: #e5e7eb;
        box-shadow: 0 0 24px rgba(56, 189, 248, 0.35);
        transform: translateY(-1px);
      }

      .filter-chip:hover::before {
        opacity: 1;
      }

      .filter-chip.active {
        background: var(--accent);
        color: #000;
        border-color: var(--accent);
        box-shadow: 0 0 20px var(--accent-glow),
          0 4px 12px rgba(16, 185, 129, 0.3);
      }

      .sub-filters {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin-top: 10px;
        font-size: 11px;
        color: var(--text-secondary);
      }

      .sub-filter-pill {
        padding: 4px 10px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.35);
        background: rgba(15, 23, 42, 0.9);
      }

      .opacity-0 {
        opacity: 0;
      }

      .pointer-events-none {
        pointer-events: none;
      }

      /* ========== FEED & PRODUCT CARDS PREMIUM ========== */
      .feed-grid {
        margin-top: 20px;
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 14px;
      }

      @media (max-width: 480px) {
        .feed-grid {
          grid-template-columns: 1fr;
        }
      }

      .product-card {
        position: relative;
        background: var(--bg-card);
        border-radius: 20px;
        overflow: hidden;
        border: 1px solid var(--border);
        transition: all 0.18s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
      }

      .product-card:active {
        transform: scale(0.98);
        border-color: var(--accent);
      }

      .product-card-media {
        position: relative;
        overflow: hidden;
        border-radius: 18px;
      }

      .product-card video,
      .product-card img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .product-card-gradient {
        position: absolute;
        inset: 30% -20% -8px -20%;
        background: radial-gradient(
            circle at 0 0,
            rgba(56, 189, 248, 0.3),
            transparent 60%
          ),
          radial-gradient(
            circle at 100% 0,
            rgba(16, 185, 129, 0.45),
            transparent 65%
          ),
          radial-gradient(
            circle at 50% 100%,
            rgba(245, 158, 11, 0.55),
            transparent 65%
          );
        mix-blend-mode: screen;
        opacity: 0;
        pointer-events: none;
        transition: opacity 200ms ease-out;
      }

      .product-card:hover .product-card-gradient {
        opacity: 1;
      }

      .product-card::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          135deg,
          transparent 0%,
          rgba(16, 185, 129, 0.05) 100%
        );
        opacity: 0;
        transition: opacity 0.3s;
        z-index: 1;
      }

      .product-card:hover::before {
        opacity: 1;
      }

      .product-card-content {
        padding: 12px 12px 14px;
      }

      .product-title {
        font-size: 0.9rem;
        margin: 0;
        color: #f9fafb;
      }

      .product-subtitle {
        margin-top: 2px;
        font-size: 0.75rem;
        color: var(--text-secondary);
      }

      .badge-premium {
        position: absolute;
        top: 10px;
        left: 10px;
        z-index: 2;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 8px;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: #000;
        background: rgba(16, 185, 129, 0.9);
        box-shadow: 0 2px 8px rgba(16, 185, 129, 0.4);
      }

      .badge-bestseller {
        background: linear-gradient(135deg, #f59e0b 0%, #f97316 100%);
        animation: badgePulse 2s ease-in-out infinite;
        color: #000;
      }

      @keyframes badgePulse {
        0%,
        100% {
          box-shadow: 0 2px 8px rgba(245, 158, 11, 0.4);
        }
        50% {
          box-shadow: 0 4px 16px rgba(245, 158, 11, 0.6);
        }
      }

      .badge-stock {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        margin-top: 4px;
        background: rgba(239, 68, 68, 0.9);
        color: #fff;
        font-size: 9px;
        font-weight: 800;
        padding: 3px 8px;
        border-radius: 999px;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        animation: badgeUrgent 1.5s ease-in-out infinite;
      }

      @keyframes badgeUrgent {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      .activity-badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        background: rgba(16, 185, 129, 0.1);
        border: 1px solid rgba(16, 185, 129, 0.2);
        color: var(--accent);
        padding: 4px 10px;
        border-radius: 8px;
        font-size: 9px;
        font-weight: 700;
        letter-spacing: 0.05em;
        margin-top: 6px;
      }

      .activity-dot {
        width: 6px;
        height: 6px;
        background: var(--accent);
        border-radius: 50%;
        animation: pulse-dot 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }

      /* ========== PRICING PREMIUM ========== */
      .price-display {
        display: flex;
        align-items: baseline;
        gap: 8px;
        margin-top: 8px;
      }

      .price-old {
        text-decoration: line-through;
        color: #666;
        font-size: 0.8rem;
        font-weight: 500;
      }

      .price-current {
        font-size: 1.1rem;
        font-weight: 900;
        background-image: linear-gradient(
          120deg,
          #38bdf8,
          #22c55e,
          #f59e0b
        );
        background-clip: text;
        -webkit-background-clip: text;
        color: transparent;
      }

      .price-save {
        background: rgba(16, 185, 129, 0.15);
        color: var(--accent);
        font-size: 9px;
        font-weight: 800;
        padding: 2px 8px;
        border-radius: 999px;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      /* ========== SOCIAL PROOF ==========
         (adapt√© du code original) */
      .social-proof-ticker {
        position: fixed;
        bottom: 120px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 60;
        width: 90%;
        max-width: 400px;
        pointer-events: none;
      }

      .social-proof-item {
        background: linear-gradient(
          135deg,
          rgba(10, 10, 10, 0.98) 0%,
          rgba(17, 17, 17, 0.98) 100%
        );
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid var(--border-accent);
        border-radius: 16px;
        padding: 12px 16px;
        margin-bottom: 8px;
        animation: slideInUp 0.5s cubic-bezier(0.4, 0, 0.2, 1),
          fadeOut 0.5s 4.5s forwards;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5),
          0 0 0 1px rgba(16, 185, 129, 0.1);
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 11px;
      }

      .social-proof-icon {
        font-size: 18px;
        filter: drop-shadow(0 2px 4px rgba(16, 185, 129, 0.3));
      }

      @keyframes slideInUp {
        from {
          transform: translateY(100px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes fadeOut {
        to {
          opacity: 0;
          transform: translateY(-20px);
        }
      }

      /* ========== NAV BOTTOM PREMIUM ========== */
      .bottom-nav {
        position: fixed;
        z-index: 50;
        bottom: 16px;
        left: 50%;
        transform: translateX(-50%);
        width: 100%;
        max-width: 640px;
        padding: 0 16px;
        box-sizing: border-box;
      }

      .nav-glass {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 6px;
        border-radius: 999px;
        background: rgba(0, 0, 0, 0.9);
        backdrop-filter: blur(30px) saturate(180%);
        -webkit-backdrop-filter: blur(30px) saturate(180%);
        border: 1px solid var(--border-accent);
        box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.3),
          0 0 0 1px rgba(16, 185, 129, 0.05);
      }

      .nav-btn {
        position: relative;
        flex: 1;
        padding: 8px 10px 14px;
        border-radius: 999px;
        border: none;
        background: transparent;
        color: var(--text-secondary);
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        cursor: pointer;
        overflow: hidden;
        transition: color 0.2s, transform 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
      }

      .nav-btn span {
        position: relative;
        z-index: 1;
      }

      .nav-btn::before {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: inherit;
        background: linear-gradient(
          120deg,
          rgba(56, 189, 248, 0.16),
          rgba(16, 185, 129, 0.9),
          rgba(56, 189, 248, 0.12)
        );
        opacity: 0;
        transform: scale(0.95);
        transition: opacity 0.2s, transform 0.2s;
      }

      .nav-btn.active {
        color: #f9fafb;
      }

      .nav-btn.active::before {
        opacity: 1;
        transform: scale(1);
      }

      .nav-btn:active {
        transform: scale(0.9);
      }

      .cart-badge {
        min-width: 18px;
        height: 18px;
        border-radius: 999px;
        background: #ef4444;
        color: #fff;
        font-size: 10px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }

      /* ========== CTA BUTTONS PREMIUM ========== */
      .cta-button {
        position: relative;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 10px 18px;
        border-radius: 999px;
        border: none;
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.16em;
        font-weight: 600;
        cursor: pointer;
        color: #ecfdf5;
        background-image: linear-gradient(
          120deg,
          #22c55e,
          #14b8a6,
          #0ea5e9
        );
        box-shadow: 0 0 40px rgba(16, 185, 129, 0.45);
        overflow: hidden;
        transition: transform 120ms ease-out, box-shadow 160ms ease-out,
          filter 160ms ease-out;
      }

      .cta-button::before {
        content: "";
        position: absolute;
        inset: -40%;
        background: radial-gradient(
          circle at 0 0,
          rgba(255, 255, 255, 0.32),
          transparent 55%
        );
        opacity: 0;
        transform: translate3d(-30%, -30%, 0);
        transition: opacity 280ms ease-out, transform 280ms ease-out;
      }

      .cta-button:hover {
        transform: translateY(-2px) scale(1.01);
        box-shadow: 0 28px 70px rgba(16, 185, 129, 0.9);
        filter: saturate(1.15);
      }

      .cta-button:hover::before {
        opacity: 1;
        transform: translate3d(10%, 10%, 0);
      }

      .cta-button:active {
        transform: translateY(0) scale(0.99);
        box-shadow: 0 10px 35px rgba(16, 185, 129, 0.65);
      }

      /* ========== INPUTS PREMIUM ========== */
      input,
      textarea {
        background: var(--bg-elevated);
        border: 2px solid var(--border-accent);
        color: var(--text-main);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        font-size: 13px;
        border-radius: 12px;
        padding: 9px 12px;
        box-sizing: border-box;
      }

      input:focus,
      textarea:focus {
        outline: none;
        border-color: var(--accent);
        box-shadow: 0 0 0 3px var(--accent-dim);
      }

      .input-premium {
        width: 100%;
      }

      label {
        display: block;
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        color: var(--text-secondary);
        margin-bottom: 4px;
      }

      .field-group {
        margin-top: 12px;
      }

      /* ========== TOASTS (adapt√©s au style premium) ========== */
      .toast-container {
        position: fixed;
        top: 80px;
        right: 20px;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        gap: 12px;
        pointer-events: none;
      }

      .toast {
        pointer-events: all;
        background: linear-gradient(
          135deg,
          rgba(10, 10, 10, 0.98) 0%,
          rgba(17, 17, 17, 0.98) 100%
        );
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid var(--border-accent);
        border-radius: 16px;
        padding: 16px 20px;
        min-width: 280px;
        max-width: 380px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5),
          0 0 0 1px rgba(16, 185, 129, 0.1);
        animation: toastSlideIn 0.5s
          cubic-bezier(0.68, -0.55, 0.265, 1.55);
        display: flex;
        align-items: flex-start;
        gap: 12px;
        font-size: 11px;
      }

      .toast.success {
        border-color: var(--accent);
        box-shadow: 0 10px 40px rgba(16, 185, 129, 0.3);
      }

      .toast.error {
        border-color: #ef4444;
        box-shadow: 0 10px 40px rgba(239, 68, 68, 0.3);
      }

      .toast.warning {
        border-color: #f59e0b;
        box-shadow: 0 10px 40px rgba(245, 158, 11, 0.3);
      }

      .toast-icon {
        font-size: 18px;
        flex-shrink: 0;
        line-height: 1;
      }

      .toast-content {
        flex: 1;
      }

      .toast-title {
        font-size: 10px;
        font-weight: 900;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        margin-bottom: 4px;
      }

      .toast-message {
        font-size: 11px;
        color: var(--text-secondary);
        line-height: 1.5;
      }

      @keyframes toastSlideIn {
        from {
          transform: translateX(400px);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes toastSlideOut {
        to {
          transform: translateX(400px);
          opacity: 0;
        }
      }

      /* ========== MODALS PREMIUM ========== */
      .modal-backdrop {
        position: fixed;
        inset: 0;
        background: radial-gradient(
            circle at top,
            rgba(15, 23, 42, 0.7),
            rgba(0, 0, 0, 0.95)
          ),
          rgba(15, 23, 42, 0.9);
        backdrop-filter: blur(22px);
        -webkit-backdrop-filter: blur(22px);
        display: flex;
        align-items: flex-end;
        justify-content: center;
        z-index: 40;
      }

      .modal-premium {
        width: min(520px, 100% - 24px);
        border-radius: 24px 24px 0 0;
        background: radial-gradient(
            circle at 0 0,
            rgba(56, 189, 248, 0.25),
            transparent 60%
          ),
          radial-gradient(
            circle at 100% 0,
            rgba(16, 185, 129, 0.4),
            transparent 60%
          ),
          rgba(15, 23, 42, 0.98);
        border: 1px solid rgba(148, 163, 184, 0.5);
        box-shadow: 0 -28px 80px rgba(0, 0, 0, 1);
        padding: 20px 18px 18px;
        position: relative;
        transform: translateY(0);
        transition: transform 0.3s ease-out;
      }

      .translate-y-full {
        transform: translateY(100%);
      }

      .modal-premium__header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        margin-bottom: 12px;
      }

      .modal-premium__title {
        font-size: 16px;
        color: #f9fafb;
      }

      .modal-premium__body {
        font-size: 13px;
        color: rgba(209, 213, 219, 0.95);
      }

      .close-btn {
        position: absolute;
        top: 10px;
        right: 14px;
        background: transparent;
        border: none;
        color: var(--text-secondary);
        font-size: 20px;
        cursor: pointer;
      }

      .swipe-indicator {
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        width: 50px;
        height: 4px;
        background: #333;
        border-radius: 2px;
        z-index: 10;
      }

      .modal-media {
        margin-top: 10px;
        border-radius: 18px;
        overflow: hidden;
      }

      .product-modal-media {
        width: 100%;
        max-height: 260px;
        object-fit: cover;
        border-radius: 18px;
      }

      .tiers-grid {
        margin-top: 14px;
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 10px;
      }

      .tier-card {
        background: var(--bg-elevated);
        border: 2px solid var(--border-accent);
        border-radius: 14px;
        padding: 8px 10px;
        font-size: 11px;
        display: flex;
        flex-direction: column;
        gap: 4px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }

      .tier-card::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          135deg,
          transparent,
          rgba(16, 185, 129, 0.05)
        );
        opacity: 0;
        transition: opacity 0.3s;
      }

      .tier-card:hover::before {
        opacity: 1;
      }

      .tier-card:active {
        transform: scale(0.96);
        border-color: var(--accent);
      }

      .tier-main {
        display: flex;
        align-items: baseline;
        justify-content: space-between;
        gap: 4px;
      }

      .tier-label {
        font-weight: 800;
      }

      .tier-price {
        font-weight: 900;
        color: var(--accent);
      }

      .tier-oldprice {
        text-decoration: line-through;
        color: #6b7280;
        font-size: 10px;
      }

      .tier-save {
        font-size: 9px;
        color: #bbf7d0;
      }

      .security-check {
        display: flex;
        align-items: flex-start;
        gap: 8px;
        font-size: 11px;
        color: var(--text-secondary);
        margin-top: 14px;
      }

      .security-check input {
        margin-top: 2px;
      }

      .payment-grid {
        margin-top: 12px;
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 10px;
      }

      .pay-card {
        background: var(--bg-elevated);
        border: 2px solid var(--border-accent);
        border-radius: 14px;
        padding: 8px 10px;
        font-size: 12px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .pay-card:active {
        transform: scale(0.96);
      }

      .pay-card.selected {
        background: rgba(16, 185, 129, 0.1);
        border-color: var(--accent);
        box-shadow: 0 0 20px var(--accent-glow);
      }

      .pay-indicator {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #333;
        transition: all 0.3s;
      }

      .pay-card.selected .pay-indicator {
        background: var(--accent);
        box-shadow: 0 0 10px var(--accent);
      }

      .tabs-row {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 6px;
        margin-top: 10px;
        margin-bottom: 10px;
      }

      .tab-btn {
        background: var(--bg-elevated);
        color: var(--text-secondary);
        border: 2px solid var(--border-accent);
        border-radius: 999px;
        padding: 6px 8px;
        font-size: 10px;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .tab-btn::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          135deg,
          var(--accent) 0%,
          #34d399 100%
        );
        opacity: 0;
        transition: opacity 0.3s;
      }

      .tab-btn span {
        position: relative;
        z-index: 1;
      }

      .tab-btn.active::before {
        opacity: 1;
      }

      .tab-btn.active {
        color: #000;
        border-color: var(--accent);
        font-weight: 900;
        box-shadow: 0 0 20px var(--accent-glow);
      }

      /* ========== PROCESSING SCREEN ========== */
      #processing-screen .modal-premium {
        text-align: center;
      }

      .radar-scan {
        width: 100%;
        height: 2px;
        background: var(--accent);
        box-shadow: 0 0 15px var(--accent);
        animation: scan 1.5s linear infinite;
        margin: 12px 0;
      }

      @keyframes scan {
        0% {
          transform: translateY(-50px);
          opacity: 0;
        }
        50% {
          opacity: 1;
        }
        100% {
          transform: translateY(50px);
          opacity: 0;
        }
      }

      /* ========== CONFETTI & SKELETON (reprise) ========== */
      .confetti {
        position: fixed;
        width: 10px;
        height: 10px;
        z-index: 9998;
        pointer-events: none;
      }

      @keyframes confetti-fall {
        to {
          transform: translateY(100vh) rotate(720deg);
          opacity: 0;
        }
      }

      .skeleton {
        background: linear-gradient(
          90deg,
          var(--bg-card) 25%,
          var(--bg-elevated) 50%,
          var(--bg-card) 75%
        );
        background-size: 200% 100%;
        animation: skeleton-loading 1.5s infinite;
        border-radius: 12px;
      }

      @keyframes skeleton-loading {
        0% {
          background-position: 200% 0;
        }
        100% {
          background-position: -200% 0;
        }
      }

      /* ========== BLOCK SCREEN (bots / hors Telegram) ========== */
      #block-screen {
        position: fixed;
        inset: 0;
        background: #000;
        color: #fff;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 24px;
        z-index: 10000;
      }

      #block-screen h1 {
        font-size: 1.4rem;
        margin-bottom: 8px;
      }

      #block-screen p {
        font-size: 0.9rem;
        color: var(--text-secondary);
      }

      /* ========== UTILS ========== */
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }

      .fade-in {
        animation: fadeIn 0.4s ease-out forwards;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* ========== RESPONSIVE ========== */
      @media (max-width: 640px) {
        .splash-logo {
          width: 100px;
          height: 100px;
        }
        .splash-title {
          font-size: 2rem;
        }
        .toast {
          min-width: 260px;
        }
      }

      /* ========== Prefers-reduced-motion ========== */
      @media (prefers-reduced-motion: reduce) {
        * {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
          scroll-behavior: auto !important;
        }
      }
    </style>
  </head>
  <body>
    <!-- Honeypot pour bot detection -->
    <input
      id="contact_email"
      type="email"
      style="display: none"
      autocomplete="off"
    />

    <!-- √âcran blocage (bots / hors Telegram) -->
    <div id="block-screen" class="hidden">
      <h1>‚õî ACC√àS REFUS√â</h1>
      <p>Cette application n√©cessite Telegram.</p>
    </div>

    <!-- Splash Screen -->
    <div id="splash-screen">
      <img
        src="https://res.cloudinary.com/dlmmylat6/image/upload/v1770004112/0453086a-aa8b-480c-9227-6ceb099b3530_z111qu.png"
        alt="South Valley"
        class="splash-logo"
      />
      <div class="splash-title brand-font">SOUTH VALLEY</div>
    </div>

    <!-- Toasts -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Social proof -->
    <div id="social-proof-ticker" class="social-proof-ticker"></div>

    <!-- Processing -->
    <div id="processing-screen" class="modal-backdrop hidden">
      <div class="modal-premium">
        <h2 class="modal-premium__title brand-font">üîí CHIFFREMENT...</h2>
        <p class="modal-premium__body">
          Envoi s√©curis√© au Staff. Ne ferme pas l'application.
        </p>
        <div class="radar-scan"></div>
      </div>
    </div>

    <!-- Shell principal -->
    <div class="app-shell no-scrollbar">
      <!-- HEADER -->
      <header class="header-glass">
        <div class="status-left">
          <img
            src="https://res.cloudinary.com/dlmmylat6/image/upload/v1770004112/0453086a-aa8b-480c-9227-6ceb099b3530_z111qu.png"
            alt="South Valley"
            class="header-logo"
          />
          <div class="header-title-block">
            <span class="header-title">SOUTH VALLEY</span>
            <span class="header-subtitle brand-font">TON PLUG NUM√âRO 1</span>
          </div>
        </div>
        <span class="header-badge brand-font">Top French Plug</span>
      </header>

      <!-- MARQUEE -->
      <section class="brand-font">
        <div class="marquee-container">
          <div class="marquee-track">
            <span class="marquee-item"
              >üõ°Ô∏è CNI + SELFIE OBLIGATOIRE (NOUVEAUX CLIENTS)</span
            >
            <span class="marquee-item"
              >‚ö° LIVRAISON EXPRESS IDF + ZONES LIMITROPHES</span
            >
            <span class="marquee-item"
              >ü§ù MEET-UP 92 NORD DISCRET &amp; S√âCURIS√â</span
            >
            <span class="marquee-item"
              >üì¶ SERVICE POSTAL ULTRA-S√âCURIS√â</span
            >
            <span class="marquee-item"
              >üí∂ PAIEMENT CASH &amp; CRYPTO UNIQUEMENT</span
            >
          </div>
        </div>
      </section>

      <!-- STATUS BAR -->
      <section class="status-bar">
        <div class="status-left">
          <div id="status-dot" class="status-dot offline"></div>
          <div>
            <div class="status-label">SHOP STATUS</div>
            <div id="status-text" class="status-hours">OFF / DODO</div>
          </div>
        </div>
        <div class="status-hours">HORAIRES: 10H30 - 02H30</div>
      </section>

      <!-- FILTERS -->
      <section class="filters-row">
        <button
          id="btn-all"
          class="filter-chip active"
          onclick="filterFeed('all')"
        >
          <span>TOUT</span>
        </button>
        <button
          id="btn-hash"
          class="filter-chip"
          onclick="filterFeed('HASH')"
        >
          <span>HASH</span>
        </button>
        <button
          id="btn-weed"
          class="filter-chip"
          onclick="filterFeed('WEED')"
        >
          <span>WEED</span>
        </button>
        <button
          id="btn-fest"
          class="filter-chip"
          onclick="filterFeed('FESTIVIT√âS')"
        >
          <span>FESTIVIT√âS</span>
        </button>
      </section>

      <!-- SUB FILTERS -->
      <section>
        <div id="sub-filters" class="sub-filters opacity-0 pointer-events-none">
          <!-- Rempli dynamiquement -->
        </div>
      </section>

      <!-- MAIN FEED -->
      <main id="main-feed" class="feed-grid">
        <!-- Rendu JS -->
      </main>
    </div>

    <!-- NAVIGATION BAS -->
    <nav class="nav-glass bottom-nav">
      <button class="nav-btn active" onclick="resetHome()">
        <span class="accent-font">‚ö° STOCK</span>
      </button>
      <button class="nav-btn" onclick="openInfos()">
        <span class="accent-font">üè¥‚Äç‚ò†Ô∏è INFOS</span>
      </button>
      <button class="nav-btn" onclick="openCart()">
        <span class="accent-font">üëú PANIER</span>
        <span id="cart-badge" class="cart-badge hidden">0</span>
      </button>
    </nav>

    <!-- MODAL PRODUIT -->
    <div id="product-modal" class="modal-backdrop hidden">
      <div id="modal-panel" class="modal-premium translate-y-full">
        <div class="swipe-indicator"></div>
        <button
          type="button"
          class="close-btn"
          onclick="closeModal()"
          aria-label="Fermer"
        >
          ‚úï
        </button>

        <div class="modal-premium__header">
          <div>
            <h2
              id="modal-title"
              class="modal-premium__title brand-font"
            ></h2>
            <p id="modal-tag" class="modal-premium__body"></p>
          </div>
          <div id="modal-badges"></div>
        </div>

        <div class="modal-premium__body">
          <p id="modal-desc"></p>
          <div class="modal-media">
            <video
              id="modal-video"
              class="product-modal-media hidden"
              muted
              playsinline
              controls
            ></video>
            <img
              id="modal-image"
              class="product-modal-media hidden"
              alt=""
            />
          </div>
          <div id="modal-activity" style="margin-top: 10px"></div>
          <div id="tiers-list" class="tiers-grid"></div>
          <div style="margin-top: 12px">
            <button
              id="custom-req-btn"
              class="cta-button hidden"
              type="button"
              onclick="contactStaff()"
            >
              <span class="accent-font">GROS VOLUME (500G+)</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- MODAL INFOS -->
    <div id="infos-modal" class="modal-backdrop hidden">
      <div class="modal-premium">
        <button
          type="button"
          class="close-btn"
          onclick="closeInfos()"
          aria-label="Fermer"
        >
          ‚úï
        </button>
        <h2 class="modal-premium__title brand-font">INFOS &amp; SERVICES</h2>
        <div class="modal-premium__body">
          <div class="field-group">
            <div class="activity-badge">
              <span class="activity-dot"></span>
              <span>SHOP STATUS &amp; SERVICES</span>
            </div>
          </div>

          <div class="field-group">
            <h3 class="brand-font" style="font-size: 14px">üì¶ SERVICE POSTAL</h3>
            <p>Exp√©dition 24h apr√®s paiement.</p>
            <p>Zone: France &amp; Europe.</p>
            <p>S√©curit√©: Double sous-vide, tracking chiffr√©. Risque 0 garanti.</p>
          </div>

          <div class="field-group">
            <h3 class="brand-font" style="font-size: 14px">
              ü§ù MEET-UP &amp; LIVRAISON
            </h3>
            <p>
              MEET-UP : 92 Nord (Min 50‚Ç¨) - Acc√®s rapide : RER C / A86 / LIGNE
              13
            </p>
            <p>
              LIVRAISON IDF : 75/91/92/93/94/95 (Min 60‚Ç¨ √† 100‚Ç¨ selon distance)
            </p>
            <p>
              ZONES LIMITROPHES : 77/78/60/45/28... (Maximum 2H) ‚Ä¢ Minimum 150‚Ç¨
            </p>
          </div>

          <div class="field-group">
            <h3 class="brand-font" style="font-size: 14px">
              HI√âRARCHIE &amp; BONUS
            </h3>
            <p>üéÅ CADEAUX PARRAINAGE</p>
            <p>Tu parraines un ami ? Il commande ? = Cadeau imm√©diat.</p>
            <p>1G OFFERT OU 10‚Ç¨ CR√âDIT</p>
          </div>

          <div class="field-group">
            <h3 class="brand-font" style="font-size: 14px">GRADES CLIENTS</h3>
            <p>1. TOURISTE ‚Äî 0 - 2 Commandes</p>
            <p>2. INITI√â ‚Äî 3 - 9 Commandes</p>
            <p>3. V.I.P (BOSS) ‚Äî 10+ Commandes</p>
          </div>

          <div class="field-group">
            <h3 class="brand-font" style="font-size: 14px">AVIS CLIENTS</h3>
            <p><strong>C****_92</strong> ‚Äî üî•üî•üî•üî•üî•</p>
            <p>"Carr√© comme d'hab, la Mousse est violente."</p>
            <p><strong>S****_P</strong> ‚Äî üî•üî•üî•üî•</p>
            <p>"Livraison rapide, livreur discret. Top."</p>
            <p><strong>M****n</strong> ‚Äî üî•üî•üî•üî•üî•</p>
            <p>"Le Frozen Sift c'est de l'art. Merci l'√©quipe."</p>
          </div>

          <div class="field-group">
            <button
              type="button"
              class="cta-button"
              onclick="contactStaff()"
            >
              <span class="accent-font">VOIR TOUS LES AVIS TELEGRAM</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- MODAL CHECKOUT -->
    <div id="checkout-modal" class="modal-backdrop hidden">
      <div class="modal-premium">
        <button
          type="button"
          class="close-btn"
          onclick="closeCheckout()"
          aria-label="Fermer"
        >
          ‚úï
        </button>
        <h2 class="modal-premium__title brand-font">VALIDATION</h2>

        <div class="tabs-row">
          <button
            id="tab-meetup"
            class="tab-btn active"
            type="button"
            onclick="switchTab('meetup')"
          >
            <span>MEET-UP</span>
          </button>
          <button
            id="tab-delivery"
            class="tab-btn"
            type="button"
            onclick="switchTab('delivery')"
          >
            <span>LIVRAISON</span>
          </button>
          <button
            id="tab-postal"
            class="tab-btn"
            type="button"
            onclick="switchTab('postal')"
          >
            <span>POSTAL</span>
          </button>
        </div>

        <div id="checkout-recap" class="modal-premium__body"></div>

        <!-- MEET-UP -->
        <div id="fields-meetup">
          <div class="field-group">
            <label for="mu-whatsapp">TON WHATSAPP (OBLIGATOIRE)</label>
            <input
              id="mu-whatsapp"
              type="tel"
              class="input-premium"
              placeholder="+33..."
            />
          </div>
          <div class="field-group">
            <label for="mu-time">HEURE DE PASSAGE</label>
            <input
              id="mu-time"
              type="text"
              class="input-premium"
              placeholder="ex: 21h30"
            />
          </div>
        </div>

        <!-- LIVRAISON -->
        <div id="fields-delivery" class="hidden">
          <div class="field-group">
            <label for="del-whatsapp">TON WHATSAPP (OBLIGATOIRE)</label>
            <input id="del-whatsapp" type="tel" class="input-premium" />
          </div>
          <div class="field-group">
            <label for="del-address">ADRESSE COMPL√àTE (ZONE IDF)</label>
            <textarea
              id="del-address"
              class="input-premium"
              rows="3"
            ></textarea>
          </div>
        </div>

        <!-- POSTAL -->
        <div id="fields-postal" class="hidden">
          <div class="field-group">
            <label for="post-whatsapp">TON WHATSAPP (OBLIGATOIRE)</label>
            <input id="post-whatsapp" type="tel" class="input-premium" />
          </div>
          <div class="field-group">
            <label for="post-address">COORDONN√âES COMPL√àTES</label>
            <textarea
              id="post-address"
              class="input-premium"
              rows="3"
            ></textarea>
          </div>
        </div>

        <!-- PAIEMENT -->
        <input type="hidden" id="payment-method" value="CASH" />
        <div class="payment-grid">
          <div
            class="pay-card selected"
            onclick="selectPayment('CASH', this)"
          >
            <div class="pay-indicator"></div>
            <span>üí∂ CASH</span>
          </div>
          <div class="pay-card" onclick="selectPayment('USDT', this)">
            <div class="pay-indicator"></div>
            <span>ü™ô USDT</span>
          </div>
          <div class="pay-card" onclick="selectPayment('BITCOIN', this)">
            <div class="pay-indicator"></div>
            <span>‚Çø BITCOIN</span>
          </div>
          <div class="pay-card" onclick="selectPayment('MONERO', this)">
            <div class="pay-indicator"></div>
            <span>üîí MONERO</span>
          </div>
        </div>

        <!-- PROTOCOLE S√âCURIT√â -->
        <label class="security-check">
          <input id="check-id" type="checkbox" />
          <span>
            üö´ PROTOCOLE S√âCURIT√â IMPORTANT<br />
            üì∏ SELFIE + CNI OBLIGATOIRE SUR WHATSAPP<br />
            <em
              >Rien n'est conserv√©, tout est supprim√© instantan√©ment apr√®s
              confirmation.</em
            >
          </span>
        </label>

        <!-- CTA -->
        <div style="margin-top: 16px">
          <button
            type="button"
            class="cta-button"
            onclick="submitOrder()"
          >
            <span class="accent-font">ENVOYER AU STAFF ‚û§</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Google Analytics / gtag -->
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-XXXXXXXXXX", {
        anonymize_ip: true,
        cookie_flags: "SameSite=None;Secure",
      });
    </script>

    <!-- Logique originale South Valley (s√©curit√©, catalogue, paniers...) -->
    <script>
      // ========== SECURITY ==========
      (function () {
        "use strict";

        const isBot = /bot|crawler|spider|crawling|scraper/i.test(
          navigator.userAgent
        );
        const honeypotFilled =
          document.getElementById("contact_email")?.value !== "";

        if (isBot || honeypotFilled) {
          const block = document.getElementById("block-screen");
          block.classList.remove("hidden");
          document.body.innerHTML = block.outerHTML;
          throw new Error("Bot detected");
        }

        setTimeout(() => {
          const tg = window.Telegram?.WebApp;
          if (tg) {
            tg.ready();
            tg.expand();
            tg.setHeaderColor("#000000");
            tg.enableClosingConfirmation();
          }
        }, 100);
      })();

      document.addEventListener("contextmenu", (e) => e.preventDefault());
      document.addEventListener("keydown", (e) => {
        if (
          e.key === "F12" ||
          (e.ctrlKey && e.shiftKey && e.key === "I") ||
          (e.ctrlKey && e.key === "u")
        ) {
          e.preventDefault();
          return false;
        }
      });
      document.onselectstart = () => false;

      setInterval(() => {
        const threshold = 160;
        if (
          window.outerWidth - window.innerWidth > threshold ||
          window.outerHeight - window.innerHeight > threshold
        ) {
          document.body.innerHTML = " ‚õî DEVTOOLS D√âTECT√â ";
        }
      }, 1000);

      // ========== ANALYTICS ==========
      function trackEvent(eventName, eventParams = {}) {
        if (typeof gtag !== "undefined") {
          gtag("event", eventName, eventParams);
        }
      }

      // ========== CATALOG DATA ==========
      const CATALOG = [
        {
          id: "JM",
          name: "JAUNE MOUSSEUX üßº",
          cat: "HASH",
          sub: "JAUNE MOUSSEUX",
          tag: "üá≤üá¶ TOP MOUSSE üî•",
          desc: "Sourcing direct Atlas. Texture mousseuse ultra-mall√©able. Terp√®nes authentiques, filtration 2026. Propre, gras et puissant.",
          mediaType: "video",
          src: "https://res.cloudinary.com/dlmmylat6/video/upload/v1769740747/1766600622422513_fblg2j.mov",
          tiers: [
            { w: "10G", p: 60, oldPrice: 80 },
            { w: "20G", p: 100, oldPrice: 130 },
            { w: "50G", p: 170, oldPrice: 220 },
            { w: "100G", p: 340, oldPrice: 450 },
          ],
          hasCustom: true,
          layout: "col-span-2 h-72",
          bestseller: true,
          stock: "low",
        },
        {
          id: "WZ",
          name: "WIZARD TREES üßô‚Äç‚ôÄÔ∏è",
          cat: "HASH",
          sub: "OLIVES FROZEN SIFT",
          tag: "‚ú® CALI IMPORT",
          desc: "Farm: WIZARD TREES. Frozen Sift Premium. Strains: FORBIDDEN FRUITS, OG DONUTS, DREAM QUEEN, HONEY BANANA, APPLE GELATO.",
          mediaType: "image",
          src: "https://res.cloudinary.com/dlmmylat6/image/upload/v1765993841/IMG_2073_ffmyfd.jpg",
          tiers: [
            { w: "5G (1/2)", p: 80, oldPrice: 100 },
            { w: "10G (1)", p: 170, oldPrice: 200 },
          ],
          hasCustom: false,
          layout: "col-span-1 h-60",
          stock: "medium",
        },
        {
          id: "PK",
          name: "PINK KUSH üå∏",
          cat: "WEED",
          sub: "TOPSHELF CALI USA",
          tag: "üá∫üá∏ TOP SHELF",
          desc: "CALI USA TOP SHELF - Strain PINK KUSH : T√™tes compactes, terpenes explosifs en saveurs.",
          mediaType: "video",
          src: "https://res.cloudinary.com/dlmmylat6/video/upload/v1764906290/06AECEF5-7C0A-493C-9588-99433B454A4E_2_1_hnlzee.mov",
          tiers: [
            { w: "5G", p: 60, oldPrice: 75 },
            { w: "10G", p: 120, oldPrice: 150 },
            { w: "25G", p: 220, oldPrice: 280 },
            { w: "50G", p: 380, oldPrice: 500 },
            { w: "100G", p: 780, oldPrice: 1000 },
          ],
          hasCustom: true,
          layout: "col-span-1 h-60",
          stock: "high",
        },
        {
          id: "MC",
          name: "MONTE CRISTO üíé",
          cat: "FESTIVIT√âS",
          sub: "C0¬∞¬®¬®KE",
          tag: "‚ùÑÔ∏è √âCAILLES PURES",
          desc: "√âCAILLES PURES 0,98%. Puret√© brute Bolivie. Z√©ro coupe. Le top du top.",
          mediaType: "video",
          src: "https://res.cloudinary.com/dlmmylat6/video/upload/v1764906305/IMG_1629_ntkjra.mp4",
          tiers: [
            { w: "1G", p: 60, oldPrice: 80 },
            { w: "2G", p: 120, oldPrice: 160 },
            { w: "5G", p: 260, oldPrice: 350 },
            { w: "10G", p: 450, oldPrice: 600 },
            { w: "20G", p: 800, oldPrice: 1100 },
          ],
          hasCustom: true,
          layout: "col-span-2 h-56",
          stock: "low",
        },
      ];

      // ========== STATE ==========
      let cart = [];
      let currentMode = "meetup";
      let currentFilter = "all";
      let isShopOpen = false;

      // ========== SOCIAL PROOF ENGINE ==========
      const SOCIAL_PROOF_MESSAGES = [
        { icon: "üî•", text: "Commande pass√©e", location: "92" },
        { icon: "‚ö°", text: "Activit√© r√©cente", location: "IDF" },
        { icon: "üì¶", text: "Commande en cours", location: "75" },
        { icon: "üíö", text: "Client satisfait", location: "93" },
        { icon: "üéØ", text: "Vente confirm√©e", location: "91" },
      ];

      function generateSocialProof() {
        if (!isShopOpen) return;

        const msg =
          SOCIAL_PROOF_MESSAGES[
            Math.floor(Math.random() * SOCIAL_PROOF_MESSAGES.length)
          ];
        const minAgo = Math.floor(Math.random() * 30) + 1;

        const ticker = document.getElementById("social-proof-ticker");
        const item = document.createElement("div");
        item.className = "social-proof-item";

        item.innerHTML = `
          <div class="social-proof-icon">${msg.icon}</div>
          <div>
            <div>${msg.text}</div>
            <div style="font-size:10px;color:#9CA3AF;">
              il y a ${minAgo}min ‚Ä¢ ${msg.location}
            </div>
          </div>
        `;

        ticker.appendChild(item);

        setTimeout(() => {
          item.remove();
        }, 5000);
      }

      function startSocialProofEngine() {
        setInterval(() => {
          if (isShopOpen && Math.random() > 0.6) {
            generateSocialProof();
          }
        }, 15000 + Math.random() * 15000);
      }

      // ========== TOAST ==========
      function showToast(type, title, message) {
        const container = document.getElementById("toast-container");
        const toast = document.createElement("div");
        toast.className = `toast ${type}`;

        const icons = {
          success: "‚úì",
          error: "‚úï",
          warning: "‚ö†",
        };

        toast.innerHTML = `
          <div class="toast-icon">${icons[type] || "‚óè"}</div>
          <div class="toast-content">
            <div class="toast-title">${title}</div>
            <div class="toast-message">${message}</div>
          </div>
        `;

        container.appendChild(toast);

        setTimeout(() => {
          toast.style.animation = "toastSlideOut 0.3s ease-out forwards";
          setTimeout(() => toast.remove(), 300);
        }, 4000);
      }

      // ========== CONFETTI ==========
      function triggerConfetti() {
        const colors = ["#10B981", "#34D399", "#6EE7B7", "#FFF"];
        for (let i = 0; i < 50; i++) {
          setTimeout(() => {
            const confetti = document.createElement("div");
            confetti.className = "confetti";
            confetti.style.left = Math.random() * 100 + "%";
            confetti.style.top = "-10px";
            confetti.style.background =
              colors[Math.floor(Math.random() * colors.length)];
            confetti.style.animation = `${
              "confetti-fall"
            } ${2 + Math.random() * 2}s linear forwards`;
            confetti.style.transform = `rotate(${
              Math.random() * 360
            }deg)`;
            document.body.appendChild(confetti);
            setTimeout(() => confetti.remove(), 4000);
          }, i * 30);
        }
      }

      // ========== HAPTIC ==========
      function triggerHaptic(type = "light") {
        const tg = window.Telegram?.WebApp;
        if (tg?.HapticFeedback) {
          if (type === "light") tg.HapticFeedback.impactOccurred("light");
          if (type === "medium") tg.HapticFeedback.impactOccurred("medium");
          if (type === "heavy") tg.HapticFeedback.impactOccurred("heavy");
          if (type === "success")
            tg.HapticFeedback.notificationOccurred("success");
          if (type === "error")
            tg.HapticFeedback.notificationOccurred("error");
        }
      }

      // ========== STATUS ==========
      const updateStatus = () => {
        const now = new Date();
        const hour = now.getHours();
        const minute = now.getMinutes();
        const currentTime = hour + minute / 60;

        isShopOpen =
          (currentTime >= 10.5 && currentTime <= 24) ||
          (currentTime >= 0 && currentTime <= 2.5);

        const dot = document.getElementById("status-dot");
        const text = document.getElementById("status-text");

        if (isShopOpen) {
          dot.className = "status-dot online";
          text.innerText = "OPEN / ACTIF";
          text.className = "status-hours";
        } else {
          dot.className = "status-dot offline";
          text.innerText = "OFF / DODO";
          text.className = "status-hours";
        }
      };

      // ========== INIT ==========
      window.onload = () => {
        setTimeout(() => {
          const splash = document.getElementById("splash-screen");
          if (splash) {
            splash.style.opacity = "0";
            setTimeout(() => splash.remove(), 800);
          }
        }, 1800);

        updateStatus();
        setInterval(updateStatus, 60000);
        renderFeed();
        startSocialProofEngine();

        trackEvent("app_loaded");
      };

      // ========== NAVIGATION ==========
      function resetHome() {
        window.scrollTo({ top: 0, behavior: "smooth" });
        document.getElementById("product-modal").classList.add("hidden");
        document.getElementById("infos-modal").classList.add("hidden");
        document.getElementById("checkout-modal").classList.add("hidden");
        filterFeed("all");

        document
          .querySelectorAll(".nav-btn")
          .forEach((btn) => btn.classList.remove("active"));
        document.querySelectorAll(".nav-btn")[0].classList.add("active");

        trackEvent("navigate_home");
      }

      // ========== FILTERS ==========
      function filterFeed(cat) {
        currentFilter = cat;
        triggerHaptic("light");

        document.querySelectorAll(".filter-chip").forEach((btn) => {
          const isTarget =
            btn.id ===
            `btn-${
              cat === "HASH"
                ? "hash"
                : cat === "WEED"
                ? "weed"
                : cat === "FESTIVIT√âS"
                ? "fest"
                : "all"
            }`;
          btn.classList.toggle("active", isTarget);
        });

        const subBar = document.getElementById("sub-filters");
        if (cat !== "all") {
          const subs = [
            ...new Set(CATALOG.filter((i) => i.cat === cat).map((i) => i.sub)),
          ];
          subBar.innerHTML = subs
            .map(
              (s) =>
                `<span class="sub-filter-pill">${s}</span>`
            )
            .join("");
          subBar.classList.remove("opacity-0", "pointer-events-none");
        } else {
          subBar.classList.add("opacity-0", "pointer-events-none");
        }

        renderFeed();
        trackEvent("filter_changed", { category: cat });
      }

      // ========== RENDER FEED ==========
      function renderFeed() {
        const container = document.getElementById("main-feed");
        const filtered =
          currentFilter === "all"
            ? CATALOG
            : CATALOG.filter((i) => i.cat === currentFilter);

        container.innerHTML = `
          ${filtered
            .map(
              (item) => `
                <article class="product-card fade-in" onclick="openProduct('${
                  item.id
                }')">
                  <div class="product-card-media">
                    ${
                      item.mediaType === "video"
                        ? `<video src="${item.src}" muted playsinline></video>`
                        : `<img src="${item.src}" alt="${item.name}" />`
                    }
                    <div class="product-card-gradient"></div>
                    ${
                      item.bestseller
                        ? `<span class="badge-premium badge-bestseller brand-font">BEST SELLER</span>`
                        : `<span class="badge-premium brand-font">${item.tag}</span>`
                    }
                  </div>
                  <div class="product-card-content">
                    <h3 class="product-title brand-font">${item.name}</h3>
                    <div class="product-subtitle">${item.sub}</div>
                    ${
                      item.stock === "low"
                        ? `<div class="badge-stock">STOCK LIMIT√â</div>`
                        : ""
                    }
                    <div class="price-display">
                      ${
                        item.tiers[0].oldPrice
                          ? `<span class="price-old">${item.tiers[0].oldPrice}‚Ç¨</span>`
                          : ""
                      }
                      <span class="price-current">${item.tiers[0].p}‚Ç¨</span>
                      ${
                        item.tiers[0].oldPrice
                          ? `<span class="price-save">√âconomise ${
                              item.tiers[0].oldPrice - item.tiers[0].p
                            }‚Ç¨</span>`
                          : ""
                      }
                    </div>
                  </div>
                </article>
              `
            )
            .join("")}
        `;
      }

      // ========== OPEN PRODUCT ==========
      function openProduct(id) {
        const p = CATALOG.find((x) => x.id === id);

        trackEvent("product_view", {
          product_id: id,
          product_name: p.name,
        });

        document.getElementById("modal-title").innerText = p.name;
        document.getElementById("modal-tag").innerText = p.tag;
        document.getElementById("modal-desc").innerText = p.desc;

        const customBtn = document.getElementById("custom-req-btn");
        p.hasCustom
          ? customBtn.classList.remove("hidden")
          : customBtn.classList.add("hidden");

        const v = document.getElementById("modal-video");
        const i = document.getElementById("modal-image");
        if (p.mediaType === "video") {
          i.classList.add("hidden");
          v.classList.remove("hidden");
          v.src = p.src;
          v.play();
        } else {
          v.classList.add("hidden");
          i.classList.remove("hidden");
          i.src = p.src;
        }

        let badgesHTML = "";
        if (p.bestseller) {
          badgesHTML +=
            '<span class="badge-premium badge-bestseller brand-font">BEST SELLER</span>';
        }
        if (p.stock === "low") {
          badgesHTML +=
            '<span class="badge-stock">STOCK LIMIT√â</span>';
        }
        document.getElementById("modal-badges").innerHTML = badgesHTML;

        let activityHTML = "";
        if (isShopOpen) {
          const viewers = Math.floor(Math.random() * 12) + 3;
          activityHTML = `
            <div class="activity-badge">
              <span class="activity-dot"></span>
              <span>${viewers} personnes consultent ce produit</span>
            </div>
          `;
        }
        document.getElementById("modal-activity").innerHTML = activityHTML;

        document.getElementById("tiers-list").innerHTML = p.tiers
          .map((t, index) => {
            const savings = t.oldPrice ? t.oldPrice - t.p : 0;
            return `
              <div class="tier-card">
                <div class="tier-main">
                  <span class="tier-label">${t.w}</span>
                  <span class="tier-price">${t.p}‚Ç¨</span>
                </div>
                ${
                  t.oldPrice
                    ? `<div class="tier-oldprice">${t.oldPrice}‚Ç¨</div>`
                    : ""
                }
                ${
                  savings > 0
                    ? `<div class="tier-save">√âconomise ${savings}‚Ç¨</div>`
                    : ""
                }
                <button
                  type="button"
                  class="cta-button"
                  style="margin-top:6px;padding:6px 10px;font-size:10px;"
                  onclick="addToCart('${p.id}','${t.w}',${t.p})"
                >
                  <span class="accent-font">AJOUTER</span>
                </button>
              </div>
            `;
          })
          .join("");

        document.getElementById("product-modal").classList.remove("hidden");
        setTimeout(() => {
          document
            .getElementById("modal-panel")
            .classList.remove("translate-y-full");
          triggerHaptic("light");
        }, 50);

        setupSwipeToClose();
      }

      // ========== SWIPE TO CLOSE ==========
      function setupSwipeToClose() {
        const panel = document.getElementById("modal-panel");
        let startY = 0;
        let currentY = 0;
        let isDragging = false;

        panel.addEventListener("touchstart", (e) => {
          startY = e.touches[0].clientY;
          isDragging = true;
        });

        panel.addEventListener("touchmove", (e) => {
          if (!isDragging) return;
          currentY = e.touches[0].clientY;
          const diff = currentY - startY;

          if (diff > 0) {
            panel.style.transform = `translateY(${diff}px)`;
          }
        });

        panel.addEventListener("touchend", () => {
          if (!isDragging) return;
          const diff = currentY - startY;

          if (diff > 150) {
            closeModal();
            triggerHaptic("light");
          } else {
            panel.style.transform = "translateY(0)";
          }

          isDragging = false;
        });
      }

      function closeModal() {
        const panel = document.getElementById("modal-panel");
        panel.style.transform = "";
        panel.classList.add("translate-y-full");
        setTimeout(
          () =>
            document
              .getElementById("product-modal")
              .classList.add("hidden"),
          400
        );
        triggerHaptic("light");
      }

      // ========== CART ==========
      function addToCart(id, weight, price) {
        const p = CATALOG.find((x) => x.id === id);
        cart.push({ name: p.name, w: weight, p: price });
        updateCartUI();
        closeModal();

        triggerHaptic("medium");
        showToast(
          "success",
          "AJOUT√â AU PANIER",
          `${p.name} (${weight}) ‚Ä¢ ${price}‚Ç¨`
        );

        trackEvent("add_to_cart", {
          product_id: id,
          product_name: p.name,
          quantity: weight,
          price: price,
        });
      }

      function updateCartUI() {
        const b = document.getElementById("cart-badge");
        b.innerText = cart.length;
        cart.length > 0
          ? b.classList.remove("hidden")
          : b.classList.add("hidden");
      }

      function openCart() {
        if (cart.length > 0) {
          document
            .getElementById("checkout-modal")
            .classList.remove("hidden");
          renderRecap();
          triggerHaptic("medium");

          document
            .querySelectorAll(".nav-btn")
            .forEach((btn) => btn.classList.remove("active"));
          document.querySelectorAll(".nav-btn")[2].classList.add("active");

          trackEvent("begin_checkout", {
            cart_items: cart.length,
            cart_value: cart.reduce((a, b) => a + b.p, 0),
          });
        } else {
          showToast(
            "warning",
            "PANIER VIDE",
            "Ajoute des produits avant de valider"
          );
          triggerHaptic("error");
        }
      }

      function closeCheckout() {
        document.getElementById("checkout-modal").classList.add("hidden");
        triggerHaptic("light");
      }

      function openInfos() {
        document.getElementById("infos-modal").classList.remove("hidden");
        triggerHaptic("light");

        document
          .querySelectorAll(".nav-btn")
          .forEach((btn) => btn.classList.remove("active"));
        document.querySelectorAll(".nav-btn")[1].classList.add("active");

        trackEvent("view_info");
      }

      function closeInfos() {
        document.getElementById("infos-modal").classList.add("hidden");
        triggerHaptic("light");
      }

      // ========== CHECKOUT ==========
      function renderRecap() {
        const div = document.getElementById("checkout-recap");
        let subtotal = cart.reduce((a, b) => a + b.p, 0);

        let deliveryFee = 0;
        if (currentMode === "delivery") {
          deliveryFee = 10;
        } else if (currentMode === "postal") {
          deliveryFee = 20;
        }

        let total = subtotal + deliveryFee;

        let html = "<div style='font-size:12px'>";
        cart.forEach((c, index) => {
          const cleanName = c.name
            .replace(
              /[\u{1F300}-\u{1F9FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}]/gu,
              ""
            )
            .trim();
          html += `‚Ä¢ ${index + 1}. ${cleanName} (${c.w}) ‚Äî ${
            c.p
          }‚Ç¨<br/>`;
        });
        html += "<hr style='border-color:#1f2937;margin:6px 0;' />";
        html += `Sous-total: <strong>${subtotal}‚Ç¨</strong><br/>`;

        if (deliveryFee > 0) {
          const deliveryLabel =
            currentMode === "delivery"
              ? "Livraison IDF"
              : "Envoi Postal";
          html += `${deliveryLabel}: +${deliveryFee}‚Ç¨<br/>`;
        }

        html += `<strong>TOTAL: ${total}‚Ç¨</strong>`;
        html += "</div>";

        div.innerHTML = html;
      }

      function switchTab(mode) {
        currentMode = mode;
        triggerHaptic("light");

        document
          .querySelectorAll(".tab-btn")
          .forEach((b) => b.classList.remove("active"));
        document.getElementById(`tab-${mode}`).classList.add("active");

        ["meetup", "delivery", "postal"].forEach((m) => {
          document
            .getElementById(`fields-${m}`)
            .classList.add("hidden");
        });
        document
          .getElementById(`fields-${mode}`)
          .classList.remove("hidden");

        renderRecap();

        trackEvent("checkout_method_changed", { method: mode });
      }

      function selectPayment(method, el) {
        triggerHaptic("light");

        document.getElementById("payment-method").value = method;
        document
          .querySelectorAll(".pay-card")
          .forEach((c) => c.classList.remove("selected"));
        el.classList.add("selected");

        trackEvent("payment_method_selected", { method: method });
      }

      // ========== ORDER SUBMISSION ==========
      function submitOrder() {
        if (!document.getElementById("check-id").checked) {
          showToast(
            "error",
            "ERREUR",
            "Validation du protocole s√©curit√© obligatoire"
          );
          triggerHaptic("error");
          return;
        }

        let whatsappVal = "";
        let addressVal = "";
        let timeVal = "";

        if (currentMode === "meetup") {
          whatsappVal =
            document.getElementById("mu-whatsapp").value.trim();
          timeVal = document.getElementById("mu-time").value.trim();
        }
        if (currentMode === "delivery") {
          whatsappVal =
            document.getElementById("del-whatsapp").value.trim();
          addressVal =
            document.getElementById("del-address").value.trim();
        }
        if (currentMode === "postal") {
          whatsappVal =
            document.getElementById("post-whatsapp").value.trim();
          addressVal =
            document.getElementById("post-address").value.trim();
        }

        if (!whatsappVal) {
          showToast(
            "error",
            "CHAMP REQUIS",
            "Num√©ro WhatsApp obligatoire"
          );
          triggerHaptic("error");
          return;
        }

        if (currentMode === "meetup" && !timeVal) {
          showToast(
            "warning",
            "INFO MANQUANTE",
            "Heure de passage obligatoire pour Meet-Up"
          );
          triggerHaptic("error");
          return;
        }

        if (
          (currentMode === "delivery" || currentMode === "postal") &&
          !addressVal
        ) {
          showToast(
            "error",
            "ADRESSE REQUISE",
            "Merci de renseigner ton adresse compl√®te"
          );
          triggerHaptic("error");
          return;
        }

        triggerHaptic("heavy");

        document
          .getElementById("checkout-modal")
          .classList.add("hidden");
        document
          .getElementById("processing-screen")
          .classList.remove("hidden");

        setTimeout(() => {
          let subtotal = cart.reduce((a, b) => a + b.p, 0);
          let payment =
            document.getElementById("payment-method").value;

          let deliveryFee = 0;
          if (currentMode === "delivery") {
            deliveryFee = 10;
          } else if (currentMode === "postal") {
            deliveryFee = 20;
          }

          let total = subtotal + deliveryFee;

          let msgLines = [];
          msgLines.push("COMMANDE SOUTH VALLEY");
          msgLines.push("");
          msgLines.push("=== ARTICLES ===");

          cart.forEach((c, index) => {
            const cleanName = c.name
              .replace(
                /[\u{1F300}-\u{1F9FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}]/gu,
                ""
              )
              .trim();
            msgLines.push(`${index + 1}. ${cleanName}`);
            msgLines.push(` Quantite: ${c.w}`);
            msgLines.push(` Prix: ${c.p} EUR`);
          });

          msgLines.push("");
          msgLines.push("=== TOTAL ===");
          msgLines.push(`Sous-total: ${subtotal} EUR`);
          if (deliveryFee > 0) {
            msgLines.push(`Frais livraison: +${deliveryFee} EUR`);
          }
          msgLines.push(`TOTAL: ${total} EUR`);
          msgLines.push("");
          msgLines.push("=== PAIEMENT ===");
          msgLines.push(payment);
          msgLines.push("");
          msgLines.push("=== MES INFOS ===");
          msgLines.push(`WhatsApp: ${whatsappVal}`);

          if (currentMode === "meetup") {
            msgLines.push("Mode: MEET-UP (92 Nord)");
            msgLines.push(`Heure: ${timeVal}`);
          } else if (currentMode === "delivery") {
            msgLines.push("Mode: LIVRAISON IDF");
            msgLines.push(`Adresse: ${addressVal}`);
          } else if (currentMode === "postal") {
            msgLines.push("Mode: ENVOI POSTAL");
            msgLines.push(`Adresse: ${addressVal}`);
          }

          msgLines.push("");
          msgLines.push("Pret pour verification CNI + Selfie");

          const msg = msgLines.join("\n");
          const phoneNumber = "33759840764";
          const encodedMsg = encodeURIComponent(msg);
          const waURL = `https://wa.me/${phoneNumber}?text=${encodedMsg}`;

          const tg = window.Telegram?.WebApp;

          if (tg) {
            tg.disableClosingConfirmation();
            if (tg.openTelegramLink) {
              tg.openTelegramLink(waURL);
            } else {
              const link = document.createElement("a");
              link.href = waURL;
              link.target = "_system";
              link.style.display = "none";
              document.body.appendChild(link);
              link.click();
              setTimeout(
                () => document.body.removeChild(link),
                100
              );
            }
          } else {
            window.location.href = waURL;
          }

          trackEvent("purchase", {
            transaction_id: Date.now().toString(),
            value: total,
            currency: "EUR",
            items: cart.map((c) => ({
              item_name: c.name,
              quantity: c.w,
              price: c.p,
            })),
            delivery_method: currentMode,
            payment_method: payment,
          });

          setTimeout(() => {
            document
              .getElementById("processing-screen")
              .classList.add("hidden");
            triggerConfetti();
            triggerHaptic("success");
            showToast(
              "success",
              "REDIRECTION WHATSAPP",
              "Ouverture de WhatsApp avec ta commande !"
            );

            cart = [];
            updateCartUI();
          }, 1500);
        }, 2000);
      }

      function contactStaff() {
        const waURL = `https://wa.me/33759840764`;
        const tg = window.Telegram?.WebApp;

        if (tg) {
          tg.disableClosingConfirmation();
          if (tg.openTelegramLink) {
            tg.openTelegramLink(waURL);
          } else {
            const link = document.createElement("a");
            link.href = waURL;
            link.target = "_system";
            link.style.display = "none";
            document.body.appendChild(link);
            link.click();
            setTimeout(
              () => document.body.removeChild(link),
              100
            );
          }
        } else {
          window.location.href = waURL;
        }

        trackEvent("contact_staff");
      }
    </script>
  </body>
</html>

